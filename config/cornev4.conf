# =================================================
# Core ZMK
# =================================================
CONFIG_ZMK=y
CONFIG_ZMK_USB=y
CONFIG_ZMK_KEYBOARD_NAME="Corne v4"

# =================================================
# ZMK Studio support
# =================================================
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_USB_LOGGING=y
CONFIG_USB_DEVICE_STACK=y
CONFIG_ZMK_STUDIO_LOCKING=y
CONFIG_ZMK_USB_HID=y
CONFIG_ZMK_USB_CDC_ACM=y

# =================================================
# Bluetooth (BLE)
# =================================================
CONFIG_BT=y
CONFIG_ZMK_BLE=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_MAX_PAIRED=5
CONFIG_BT_MAX_CONN=1
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# =================================================
# Power management & sleep
# =================================================
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_TIMEOUT=300000   # 5 minutes

# =================================================
# Display framework
# =================================================
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_STATUS_SCREEN=y

# Disable built-in ZMK screen (we use nice-oled instead)
CONFIG_ZMK_DISPLAY_STATUS_SCREEN_BUILT_IN=n

# =================================================
# OLED hardware (SSD1306, most Corne builds)
# =================================================
CONFIG_I2C=y
CONFIG_I2C_INIT_PRIORITY=60

CONFIG_SSD1306=y
CONFIG_SSD1306_SH1106=n            # set =y only if your OLED is SH1106
CONFIG_ZMK_DISPLAY_DRIVER_SSD1306=y
CONFIG_ZMK_DISPLAY_DRIVER_SHARP_LS013B7DH03=n

# =================================================
# nice-oled status screen
# =================================================
CONFIG_NICE_OLED_STATUS_SCREEN=y
CONFIG_NICE_OLED_ON=y

# =================================================
# Battery + WPM support (for widgets)
# =================================================
CONFIG_ZMK_BATTERY=y
CONFIG_ADC=y
CONFIG_ZMK_WPM=y

# =================================================
# nice-oled widgets
# =================================================
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_SMART_BATTERY=y
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_WPM=y
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_SPACEMAN=y

# Optional: lower FPS for power saving (recommended for wireless Corne)
CONFIG_NICE_OLED_WIDGET_ANIMATION_FPS=20

# =================================================
# Display brightness + staged sleep (optional but good)
# =================================================
#CONFIG_ZMK_DISPLAY_BRIGHTNESS=y
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_DEFAULT=100
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_DIM=25
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_TIMEOUT=10000
#CONFIG_ZMK_DISPLAY_SLEEP_TIMEOUT=30000

# =================================================
# Logging (OFF for power saving)
# =================================================
CONFIG_LOG=n
CONFIG_PRINTK=n

# =================================================
# BLE power optimization
# =================================================
CONFIG_BT_CTLR_TX_PWR_MINUS_8=y
CONFIG_BT_CTLR_PHY_2M=n
CONFIG_BT_CTLR_PHY_CODED=n
CONFIG_BT_GATT_CLIENT=n
CONFIG_BT_GATT_SERVER=y

# =================================================
# ZMK power optimizations
# =================================================
CONFIG_ZMK_IDLE_SLEEP=y
CONFIG_PM=y
CONFIG_PM_DEVICE=y
