# =================================================
# Core ZMK
# =================================================
CONFIG_ZMK=y
CONFIG_ZMK_USB=y
CONFIG_ZMK_KEYBOARD_NAME="Corne v4"

# =================================================
# ZMK Studio support
# =================================================
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_USB_LOGGING=y
CONFIG_USB_DEVICE_STACK=y
CONFIG_ZMK_STUDIO_LOCKING=y
CONFIG_ZMK_USB_HID=y
CONFIG_ZMK_USB_CDC_ACM=y


# =================================================
# Bluetooth (BLE)
# =================================================
CONFIG_BT=y
CONFIG_ZMK_BLE=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_MAX_PAIRED=5
CONFIG_BT_MAX_CONN=1

# Keep bonds across reboot
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# =================================================
# Power management & sleep
# =================================================
CONFIG_ZMK_SLEEP=y

# Full keyboard deep sleep after 5 minutes
CONFIG_ZMK_IDLE_TIMEOUT=300000

# =================================================
# Display framework
# =================================================
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_STATUS_SCREEN=y

# =================================================
# Display widgets
# =================================================
#CONFIG_ZMK_DISPLAY_WIDGET_LAYER_STATUS=y
#CONFIG_ZMK_DISPLAY_WIDGET_BATTERY_STATUS=y
#CONFIG_ZMK_DISPLAY_WIDGET_OUTPUT_STATUS=y   # USB / BLE + profile

# =================================================
# nice!display (SSD1306 via adapter)
# =================================================
#CONFIG_SSD1306=n
#CONFIG_ZMK_DISPLAY_DRIVER_SHARP_LS013B7DH03=y
#CONFIG_ZMK_DISPLAY_STATUS_SCREEN_BUILT_IN=y

# I2C for OLED
#CONFIG_I2C=y
#CONFIG_I2C_INIT_PRIORITY=60

# Display power control (adapter VCC cut)
#CONFIG_GPIO=y
#CONFIG_ZMK_DISPLAY_POWER=n

# =================================================
# Display brightness + staged sleep
# =================================================
#CONFIG_ZMK_DISPLAY_BRIGHTNESS=y

# Stage 0: Active
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_DEFAULT=100

# Stage 1: Dim after inactivity
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_DIM=25
#CONFIG_ZMK_DISPLAY_BRIGHTNESS_TIMEOUT=10000   # 10 seconds

# Stage 2: Display OFF (power cut)
#CONFIG_ZMK_DISPLAY_SLEEP_TIMEOUT=30000         # 30 seconds

# Stage 3: Full keyboard sleep handled by IDLE_TIMEOUT

# =================================================
# Battery (icon + percentage)
# =================================================
#CONFIG_ZMK_BATTERY=y
#CONFIG_ADC=y

# =================================================
# Logging (OFF for power saving)
# =================================================
CONFIG_LOG=n
CONFIG_PRINTK=n

# =================================================
# BLE power optimization
# =================================================
# Reduce TX power
CONFIG_BT_CTLR_TX_PWR_MINUS_8=y

# Disable higher power PHYs
CONFIG_BT_CTLR_PHY_2M=n
CONFIG_BT_CTLR_PHY_CODED=n

# Reduce background BLE traffic
CONFIG_BT_GATT_CLIENT=n
CONFIG_BT_GATT_SERVER=y

# =================================================
# ZMK power optimizations
# =================================================
CONFIG_ZMK_IDLE_SLEEP=y
CONFIG_PM=y
CONFIG_PM_DEVICE=y

# =================================================
# ZMK NICE OLED
# =================================================
CONFIG_NICE_OLED_ON=y
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_SMART_BATTERY=y
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_WPM=y
CONFIG_NICE_OLED_WIDGET_ANIMATION_PERIPHERAL_SPACEMAN=y
